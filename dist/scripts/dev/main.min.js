(function () {
    "use strict";
    //Navigation
    const root = document.documentElement;
    const navToggle = document.querySelector("#js-navToggle");
    navToggle.addEventListener("click", function () {
    root.classList.toggle("show-nav");
    });

    const eventPP = document.querySelector("#js-eventPP");
    if (eventPP) {
    const eventOpenBtn = document.querySelector("#js-eventOpenBtn");
    const closeEventPP = function (event) {
      function close() {
        document.removeEventListener("keyup", closeEventPP);
        eventPP.removeEventListener("click", closeEventPP);
        root.classList.remove("show-event-popup");
      }
      switch (event.type) {
        case "keyup":
          if (event.key === "Escape" || event.keyCode === 27) close();
          break;
        case "click":
          if (
            event.target === this ||
            event.target.classList.contains("js-ppCloseBtn")
          )
            close();
          break;
      }
    };
    eventOpenBtn.addEventListener("click", function () {
      root.classList.add("show-event-popup");
      document.addEventListener("keyup", closeEventPP);
      eventPP.addEventListener("click", closeEventPP);
    });

    //Slider
    const sliderPics = document.querySelector('#js-sliderPics');
    const sliderRects = document.querySelectorAll('.events-block__slider-rect');
    const sliderLeftBtn = document.querySelector('#js-sliderLeftBtn');
    const sliderRightBtn = document.querySelector('#js-sliderRightBtn');
    let sliderPicWidth = 340;
    let currentIndex = 0;

    updateSliderPicWidth();
    setActiveRect();

    sliderLeftBtn.addEventListener('click', () => {
      currentIndex = (currentIndex === 0) ? sliderRects.length - 1 : currentIndex - 1;
      slideToCurrentIndex();
      setActiveRect();
    });

    sliderRightBtn.addEventListener('click', () => {
      currentIndex = (currentIndex === sliderRects.length - 1) ? 0 : currentIndex + 1;
      slideToCurrentIndex();
      setActiveRect();
    });

    function setActiveRect() {
      sliderRects.forEach(rect => rect.classList.remove('events-block__slider-rect--active'));
      sliderRects[currentIndex].classList.add('events-block__slider-rect--active');
    }

    function slideToCurrentIndex() {
      const offset = -sliderPicWidth * currentIndex;
      sliderPics.style.transform = `translateX(${offset}px)`;
    }

    function updateSliderPicWidth() {
      const windowWidth = window.innerWidth;

      if (windowWidth === 1920) {
        sliderPicWidth = 340;
      } else if (windowWidth === 320) {
        sliderPicWidth = 300;
      }
    }

    window.addEventListener('resize', () => {
      updateSliderPicWidth();
      slideToCurrentIndex();
    });

  }
}
)();